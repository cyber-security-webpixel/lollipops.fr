'use strict';if("undefined"==typeof window.colissimoLoaded){var colissimoLoaded=!0;(function(){var e=function(c,b){var a=document.createElement("script");a.type="text/javascript";a.readyState?a.onreadystatechange=function(){if("loaded"==a.readyState||"complete"==a.readyState)a.onreadystatechange=null,window.console&&console.log("[Colissimo App] App Loaded"),b()}:a.onload=function(){window.console&&console.log("[Colissimo App] App Loaded");b()};a.src=c;document.getElementsByTagName("head")[0].appendChild(a)},
h=function(c,b){b=document.createElement("link");b.setAttribute("href",c);b.setAttribute("rel","stylesheet");document.getElementsByTagName("head")[0].appendChild(b)},g=function(c){window.console&&console.log("[Colissimo App] is using jQuery version "+c.fn.jquery);"undefined"===typeof c.fn.modal?jQuery.getScript("//cdn.shopify.com/s/files/1/0304/0172/4555/files/bootstrapcolissimo.js?v=1630928060",function(){window.console&&console.log("[Colissimo App] bootsrap js loaded")}):window.console&&console.log("[Colissimo App] bootsrap js already loaded")},
k=function(){jQuery.getScript("//cdn.shopify.com/s/files/1/0304/0172/4555/files/fontawsomecolissimo.js?v=1630928143",function(){window.console&&console.log("[Colissimo App] Font awsome kit loaded")});jQuery(".colissimo-personalize")[0]?jQuery(".colissimo-personalize").append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):jQuery("main article div.site-box-content")[0]?
jQuery("main article div.site-box-content").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):jQuery("main div.page-content")[0]?jQuery("main div.page-content").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):
jQuery("main div.page__content")[0]?jQuery("main div.page__content").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):jQuery("main div.PageContent")[0]?jQuery("main div.PageContent").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):
jQuery("main div")[0]?jQuery("main div").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):jQuery(".main-page-wrapper div")[0]&&jQuery(".main-page-wrapper div").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>'));
var c=jQuery("script[src*='initializercolissimo.js']").attr("src").split("?")[1];c=c.split("app_name=")[1];c=c.split("&")[0];var b=-1<Shopify.locale.indexOf("fr")?"fr":"en";fetch("/apps/"+c+"/front-tracking-timeline",{method:"POST",body:JSON.stringify({parcel_number:/[?&]parcel_number=([^&#]*)/.exec(window.location.href)[1]||0,language:b,shop:Shopify.shop}),headers:{"Content-Type":"application/json",Accept:"*/*"}}).then(function(a){return a.json()}).then(function(a){a.success=a.success||!1;a.success?
(jQuery("#spinnerColissimo").remove(),jQuery(".colissimo-personalize")[0]?jQuery(".colissimo-personalize").append(jQuery(a.tracking)):jQuery("main article div.site-box-content")[0]?jQuery("main article div.site-box-content").last().append(jQuery(a.tracking)):jQuery("main div.page-content")[0]?jQuery("main div.page-content").last().append(jQuery(a.tracking)):jQuery("main div.page__content")[0]?jQuery("main div.page__content").last().append(jQuery(a.tracking)):jQuery("main div.PageContent")[0]?jQuery("main div.PageContent").last().append(jQuery(a.tracking)):
jQuery("main div")[0]?jQuery("main div").last().append(jQuery(a.tracking)):jQuery(".main-page-wrapper div")[0]&&jQuery(".main-page-wrapper div").last().append(jQuery(a.tracking))):void 0===a.message&&(window.console&&console.log("[ERROR][Colissimo App] ","No tracking timeline exists"),jQuery("#spinnerColissimo").remove())}).catch(function(a){window.console&&console.log("[ERROR][Colissimo App] ",a)})},l=function(){g(jQuery);jQuery.getScript("//cdn.shopify.com/s/files/1/0304/0172/4555/files/fontawsomecolissimo.js?v=1630928143",
function(){window.console&&console.log("[Colissimo App] Font awsome kit loaded")});jQuery(".colissimo-personalize")[0]?jQuery(".colissimo-personalize").append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):jQuery("main article div.site-box-content")[0]?jQuery("main article div.site-box-content").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):
jQuery("main div.page-content")[0]?jQuery("main div.page-content").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):jQuery("main div.page__content")[0]?jQuery("main div.page__content").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):
jQuery("main div.PageContent")[0]?jQuery("main div.PageContent").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):jQuery("main div")[0]?jQuery("main div").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>')):
jQuery(".main-page-wrapper div")[0]&&jQuery(".main-page-wrapper div").last().append(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>'));var c=jQuery("script[src*='initializercolissimo.js']").attr("src").split("?")[1];c=c.split("app_name=")[1];c=c.split("&")[0];var b=jQuery("script[src*='initializercolissimo.js']").attr("src").split("?")[1];b=b.split("cloud=")[1];
b=b.split("&")[0];jQuery.getScript("//"+b+"/return.js",function(){window.console&&console.log("[Colissimo App] Page return loaded")});b=-1<Shopify.locale.indexOf("fr")?"fr":"en";fetch("/apps/"+c+"/front-return-label",{method:"POST",body:JSON.stringify({language:b}),headers:{"Content-Type":"application/json",Accept:"*/*"}}).then(function(a){return a.json()}).then(function(a){a.success=a.success||!1;a.success?(jQuery("#spinnerColissimo").remove(),jQuery(".colissimo-personalize")[0]?jQuery(".colissimo-personalize").append(jQuery(a.front_return)):
jQuery("main article div.site-box-content")[0]?jQuery("main article div.site-box-content").last().append(jQuery(a.front_return)):jQuery("main div.page-content")[0]?jQuery("main div.page-content").last().append(jQuery(a.front_return)):jQuery("main div.page__content")[0]?jQuery("main div.page__content").last().append(jQuery(a.front_return)):jQuery("main div.PageContent")[0]?jQuery("main div.PageContent").last().append(jQuery(a.front_return)):jQuery("main div")[0]?jQuery("main div").last().append(jQuery(a.front_return)):
jQuery(".main-page-wrapper div")[0]&&jQuery(".main-page-wrapper div").last().append(jQuery(a.front_return))):void 0===a.message&&(window.console&&console.log("[ERROR][Colissimo App] ","No Shopify return front process"),jQuery("#spinnerColissimo").remove())}).catch(function(a){window.console&&console.log("[ERROR][Colissimo App] ",a)})},m=function(c){g(jQuery);jQuery.getScript("//cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js",function(){window.console&&console.log("[Colissimo App] jquery validate form loaded")});
jQuery.getScript("//cdn.shopify.com/s/files/1/0304/0172/4555/files/fontawsomecolissimo.js?v=1630928143",function(){window.console&&console.log("[Colissimo App] Font awsome kit loaded")});var b=jQuery("script[src*='initializercolissimo.js']").attr("src").split("?")[1];b=b.split("app_name=")[1];b=b.split("&")[0];var a=jQuery("script[src*='initializercolissimo.js']").attr("src").split("?")[1];a=a.split("cloud=")[1];a=a.split("&")[0];jQuery.getScript("//"+a+"/return.js",function(){window.console&&console.log("[Colissimo App] Page return loaded")});
a=-1<Shopify.locale.indexOf("fr")?"fr":"en";fetch("/apps/"+b+"/get_label_return",{method:"POST",body:JSON.stringify({token:c,language:a}),headers:{"Content-Type":"application/json",Accept:"*/*"}}).then(function(d){return d.json()}).then(function(d){d.success=d.success||!1;d.success?(jQuery(".colissimo-personalize")[0]?jQuery(".colissimo-personalize").append(jQuery(d.return_label)):jQuery("main article div.site-box-content")[0]?jQuery("main article div.site-box-content").last().append(jQuery(d.return_label)):
jQuery("main div.page-content")[0]?jQuery("main div.page-content").last().append(jQuery(d.return_label)):jQuery("main div.page__content")[0]?jQuery("main div.page__content").last().append(jQuery(d.return_label)):jQuery("main div.PageContent")[0]?jQuery("main div.PageContent").last().append(jQuery(d.return_label)):jQuery("main div")[0]?jQuery("main div").last().prev().append(jQuery(d.return_label)):jQuery(".main-page-wrapper div")[0]&&jQuery(".main-page-wrapper div").last().prev().append(jQuery(d.return_label)),
jQuery("body").append(jQuery(d.modal))):void 0===d.message&&window.console&&console.log("[ERROR][Colissimo App] ","No return label attach to this order")}).catch(function(d){window.console&&console.log("[ERROR][Colissimo App] ",d)})},f=function(c){g(jQuery);var b=jQuery("script[src*='initializercolissimo.js']").attr("src").split("?")[1];b=b.split("cloud=")[1];b=b.split("&")[0];"undefined"==typeof jQuery.ui?(window.console&&console.log("[Colissimo App] Jquery UI not loaded, We load JQUERY UI"),jQuery.getScript("//cdn.shopify.com/s/files/1/0304/0172/4555/files/jquery360.js",
function(){window.console&&console.log("[Colissimo App] JQUERY UI loaded");!0===c?n(b):p(b)})):(window.console&&console.log("[Colissimo App] Jquery UI already loaded"),!0===c?n(b):p(b))},q=function(){jQuery("span[data-shipping-method-label-title]").each(function(c,b){-1<jQuery(this).text().toLowerCase().indexOf("colissimo")&&(-1<jQuery(this).text().toLowerCase().indexOf("pickup")||-1<jQuery(this).text().toLowerCase().indexOf("relais")||-1<jQuery(this).text().toLowerCase().indexOf("retraits")||-1<
jQuery(this).text().toLowerCase().indexOf("retrait")||-1<jQuery(this).text().toLowerCase().indexOf("pick-up")||-1<jQuery(this).text().toLowerCase().indexOf("punto de entrega")||-1<jQuery(this).text().toLowerCase().indexOf("lieferstelle"))&&(jQuery('<div id="spinnerColissimo" style="color:#E98215; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>').insertAfter(jQuery(this).parent().parent()),f(!0))});void 0===
Shopify.Checkout||"payment_method"!=Shopify.Checkout.step&&"review"!=Shopify.Checkout.step||jQuery(".review-block__content").each(function(c,b){-1<jQuery(this).text().toLowerCase().indexOf("colissimo")&&(-1<jQuery(this).text().toLowerCase().indexOf("pickup")||-1<jQuery(this).text().toLowerCase().indexOf("relais")||-1<jQuery(this).text().toLowerCase().indexOf("retraits")||-1<jQuery(this).text().toLowerCase().indexOf("retrait")||-1<jQuery(this).text().toLowerCase().indexOf("pick-up")||-1<jQuery(this).text().toLowerCase().indexOf("punto de entrega")||
-1<jQuery(this).text().toLowerCase().indexOf("lieferstelle"))&&(jQuery('<div id="spinnerColissimo" style="color:#ec6707; text-align:center;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>').insertAfter(jQuery(this).parent().parent()),f(!0))})},n=function(c){jQuery.getScript("//"+c+"/jquery.inputmask.bundle.js",function(){window.console&&console.log("[Colissimo App] jquery inputmask loaded")});h("//api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css",
function(){window.console&&console.log("[Colissimo App] CSS mapbox Loaded")});jQuery.getScript("//api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js",function(){window.console&&console.log("[Colissimo App] mapbox loaded")});jQuery.getScript("//ws.colissimo.fr/widget-colissimo/js/jquery.plugin.colissimo.min.js",function(){window.console&&console.log("[Colissimo App] widget colissimo loaded")});jQuery.getScript("//cdn.shopify.com/s/files/1/0304/0172/4555/files/fontawsomecolissimo.js?v=1630928143",function(){window.console&&
console.log("[Colissimo App] Font awsome kit loaded")});jQuery.getScript("//"+c+"/happycolissimo-in-checkout.js",function(){window.console&&console.log("[Colissimo App] happycolissimoJS loaded")})},p=function(c){jQuery.getScript("//"+c+"/jquery.inputmask.bundle.js",function(){window.console&&console.log("[Colissimo App] jquery inputmask loaded")});h("//api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css",function(){window.console&&console.log("[Colissimo App] CSS mapbox Loaded")});jQuery.getScript("//api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js",
function(){window.console&&console.log("[Colissimo App] mapbox loaded")});jQuery.getScript("//ws.colissimo.fr/widget-colissimo/js/jquery.plugin.colissimo.min.js",function(){window.console&&console.log("[Colissimo App] widget colissimo loaded")});jQuery.getScript("//cdn.shopify.com/s/files/1/0304/0172/4555/files/fontawsomecolissimo.js?v=1630928143",function(){window.console&&console.log("[Colissimo App] Font awsome kit loaded")});jQuery.getScript("//"+c+"/happycolissimo.js",function(){window.console&&
console.log("[Colissimo App] happycolissimoJS loaded")})};if(-1<window.location.pathname.indexOf("/account/orders/")){window.console&&console.log("[Colissimo App] Shopify Order detail");var r=window.location.pathname.split("/")[3];"undefined"===typeof jQuery||3.6>parseFloat(jQuery.fn.jquery)?e("//cdn.shopify.com/s/files/1/0304/0172/4555/files/jquery360.js",function(){jQuery=jQuery.noConflict(!0);m(r)}):m(r)}else-1<window.location.pathname.indexOf("/pages/suivi-colissimo")?(window.console&&console.log("[Colissimo App] Shopify Tracking timeline"),
"undefined"===typeof jQuery||3.6>parseFloat(jQuery.fn.jquery)?e("//cdn.shopify.com/s/files/1/0304/0172/4555/files/jquery360.js",function(){jQuery=jQuery.noConflict(!0);k()}):k()):-1<window.location.pathname.indexOf("/pages/retour-colissimo")?(window.console&&console.log("[Colissimo App] Shopify return front process"),"undefined"===typeof jQuery||3.6>parseFloat(jQuery.fn.jquery)?e("//cdn.shopify.com/s/files/1/0304/0172/4555/files/jquery360.js",function(){jQuery=jQuery.noConflict(!0);l()}):l()):void 0===
Shopify.checkout&&void 0===Shopify.Checkout?window.console&&console.log("[Colissimo App] Do nothing"):void 0===Shopify.Checkout||"shipping_method"!=Shopify.Checkout.step&&"payment_method"!=Shopify.Checkout.step&&"review"!=Shopify.Checkout.step?-1<Shopify.checkout.shipping_rate.title.toLowerCase().indexOf("colissimo")&&(-1<Shopify.checkout.shipping_rate.title.toLowerCase().indexOf("pickup")||-1<Shopify.checkout.shipping_rate.title.toLowerCase().indexOf("relais")||-1<Shopify.checkout.shipping_rate.title.toLowerCase().indexOf("retraits")||
-1<Shopify.checkout.shipping_rate.title.toLowerCase().indexOf("retrait")||-1<Shopify.checkout.shipping_rate.title.toLowerCase().indexOf("pick-up")||-1<Shopify.checkout.shipping_rate.title.toLowerCase().indexOf("punto de entrega")||-1<Shopify.checkout.shipping_rate.title.toLowerCase().indexOf("lieferstelle"))?"undefined"===typeof jQuery||3.6>parseFloat(jQuery.fn.jquery)?e("//cdn.shopify.com/s/files/1/0304/0172/4555/files/jquery360.js",function(){jQuery=jQuery.noConflict(!0);jQuery('<div id="spinnerColissimo" style="background:#E98215; color:#fff; text-align:center; padding:20px; border: 1px solid #E98215;border-radius: 5px;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>').insertBefore(jQuery(".section > .section__content").children(":first"));
f(!1)}):(jQuery('<div id="spinnerColissimo" style="background:#E98215; color:#fff; text-align:center; padding:20px; border: 1px solid #E98215;border-radius: 5px;"><i style="font-size:30px" class="fas fa-circle-notch fa-spin"></i> Please wait (Merci de patienter)...<br/><br/></div>').insertBefore(jQuery(".section > .section__content").children(":first")),f(!1)):window.console&&console.log("[Colissimo App] No need to select pickup point."):(window.console&&console.log("[Colissimo App] Check Shopify Plus version"),
"undefined"===typeof jQuery||3.6>parseFloat(jQuery.fn.jquery)?e("//cdn.shopify.com/s/files/1/0304/0172/4555/files/jquery360.js",function(){window.console&&console.log("[Colissimo App] JQUERY Loaded");jQuery=jQuery.noConflict(!0);q()}):(window.console&&console.log("[Colissimo App] JQUERY already Loaded"),q()))})()};